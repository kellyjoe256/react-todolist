(this["webpackJsonpreact-todolist"]=this["webpackJsonpreact-todolist"]||[]).push([[0],{23:function(e,t,a){e.exports=a(49)},46:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),l=a.n(s),i=a(8),o=a.n(i),c=(a(46),a(22)),u=a(10),m=a(3),d=a(4),h=a(6),p=a(5),v=a(2),E=a(7),f=a(9),g=a.n(f),b=a(21),k=a.n(b);var y=function(e){var t=e.meta,a=e.onPageChange,n=t.has_previous,s=t.has_next,l=t.current_page;return r.a.createElement("nav",{className:"pagination is-centered",role:"navigation","aria-label":"pagination"},n?r.a.createElement("a",{href:"#previous",className:"pagination-previous","aria-label":"Go to previous page",onClick:function(e){e.preventDefault(),a(l-1)}},"Previous page"):null,s?r.a.createElement("a",{href:"#next",className:"pagination-next","aria-label":"Go to next page",onClick:function(e){e.preventDefault(),a(l+1)}},"Next page"):null)},C=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"ucfirst",value:function(e){var t=String(e);return t[0].toUpperCase()+t.slice(1).toLowerCase()}},{key:"fromNow",value:function(e){return g()(e).fromNow()}},{key:"formatDate",value:function(e){return g()(e).format("Do MMM YYYY")}},{key:"renderTasks",value:function(){var e=this,t=this.props,a=t.tasks,n=t.onEdit,s=t.onDelete,l=t.onCompletion;return 0===a.length?r.a.createElement("p",null,"No tasks available"):r.a.createElement("table",{className:"table is-striped is-fullwidth is-narrow"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Task"),r.a.createElement("th",null,"Priority"),r.a.createElement("th",null,"Start Date"),r.a.createElement("th",null,"Due Date"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"\xa0"))),r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",{key:t._id,className:t.completed?"is-selected":""},r.a.createElement("td",null,t.title),r.a.createElement("td",null,e.ucfirst(t.priority)),r.a.createElement("td",null,e.formatDate(t.start_date)),r.a.createElement("td",null,e.formatDate(t.due_date)),r.a.createElement("td",null,e.fromNow(t.created_at)),r.a.createElement("td",{className:"control-buttons"},r.a.createElement("button",{type:"button",className:"button is-small is-info is-light",onClick:function(){n(t)}},"Edit"),r.a.createElement("button",{type:"button",className:"button is-small is-danger is-light",onClick:function(){s(t)}},"Delete"),r.a.createElement("button",{type:"button",className:"button is-small is-light is-success",onClick:function(){l(t)}},"Mark as"," ".concat(t.completed?"incomplete":"complete"))))}))))}},{key:"render",value:function(){var e=this.props,t=e.meta,a=e.onSearch,n=e.onChangeLimit,s=e.onPageChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"data-controls"},r.a.createElement("select",{onChange:function(e){n(e.target.value)}},r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"15"},"15"),r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"25"},"25")),r.a.createElement("input",{type:"text",className:"input",placeholder:"Search...",onKeyUp:function(e){a(e.target.value.trim())}})),this.renderTasks(),t.total_pages>1?r.a.createElement(y,{meta:t,onPageChange:s}):null)}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={priorityOptions:{"":"Select Priority",low:"Low",medium:"Medium",high:"High"}},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"getError",value:function(e){var t=this.props.errors.find((function(t){return t[e]}));return t?t[e]:null}},{key:"hasError",value:function(e){return this.props.errors.some((function(t){return t[e]}))}},{key:"displayError",value:function(e){return this.hasError(e)?r.a.createElement("p",{className:"help is-danger"},this.getError(e)):null}},{key:"render",value:function(){var e=this.state.priorityOptions,t=this.props,a=t.task,n=t.onChange,s=t.onSubmit;return r.a.createElement("form",{autoComplete:"off",onSubmit:s},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"title"},"Task / Title"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",id:"title",name:"title",placeholder:"Task",value:a.title,onChange:n,className:"input".concat(this.hasError("title")?" is-danger":"")}),this.displayError("title"))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"priority"},"Priority"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select is-fullwidth".concat(this.hasError("priority")?" is-danger":"")},r.a.createElement("select",{id:"priority",name:"priority",value:a.priority,onChange:n},Object.keys(e).map((function(t){return r.a.createElement("option",{key:t,value:t},e[t])})))),this.displayError("priority"))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"start_date"},"Start Date"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",id:"start_date",name:"start_date",pattern:"\\d{4}-\\d{2}-\\d{2}",placeholder:"YYYY-MM-DD",value:a.start_date,onChange:n,className:"input".concat(this.hasError("start_date")?" is-danger":"")}),this.displayError("start_date"))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"due_date"},"Due Date"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",id:"due_date",name:"due_date",pattern:"\\d{4}-\\d{2}-\\d{2}",placeholder:"YYYY-MM-DD",value:a.due_date,onChange:n,className:"input".concat(this.hasError("due_date")?" is-danger":"")}),this.displayError("due_date"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-link"},"Submit"))))}}]),t}(n.Component),_=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={meta:{},task:{title:"",priority:"",start_date:"",due_date:""},tasks:[],errors:[],queryParams:{page:1,perPage:5,search:""}},e.onEdit=e.onEdit.bind(Object(v.a)(e)),e.onDelete=e.onDelete.bind(Object(v.a)(e)),e.onCompletion=e.onCompletion.bind(Object(v.a)(e)),e.handleChange=e.handleChange.bind(Object(v.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(v.a)(e)),e.onSearch=e.onSearch.bind(Object(v.a)(e)),e.onChangeLimit=e.onChangeLimit.bind(Object(v.a)(e)),e.onPageChange=e.onPageChange.bind(Object(v.a)(e)),e}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getTasks()}},{key:"onEdit",value:function(e){var t=Object(u.a)({},e);t.due_date=g()(e.due_date).format("YYYY-MM-DD"),t.start_date=g()(e.start_date).format("YYYY-MM-DD"),this.setState({task:t})}},{key:"onDelete",value:function(e){var t=this;confirm("Are you sure?")&&o.a.delete("tasks/".concat(e._id)).then((function(){t.resetForm(),t.getTasks()})).catch((function(e){var t=e.response;console.log(t)}))}},{key:"onCompletion",value:function(e){var t=Object(u.a)({},e);t.completed=!t.completed,this.saveTask(t)}},{key:"onSearch",value:function(e){var t=this.state.queryParams;t.page=1,t.search=e,this.setState({queryParams:t}),this.getTasks()}},{key:"onChangeLimit",value:function(e){var t=this.state.queryParams;t.page=1,t.perPage=parseInt(e,10),this.setState({queryParams:t}),this.getTasks()}},{key:"onPageChange",value:function(e){var t=this.state.queryParams;t.page=parseInt(e,10),this.setState({queryParams:t}),this.getTasks()}},{key:"getTasks",value:function(){var e=this,t="tasks",a=this.parseQueryParams();a&&(t="".concat(t,"?").concat(a)),o.a.get(t).then((function(t){var a=t.data;e.setState({meta:a.meta,tasks:a.data})})).catch((function(e){return console.log(e)}))}},{key:"resetForm",value:function(){this.setState({task:{title:"",priority:"",start_date:"",due_date:""},errors:[]})}},{key:"saveTask",value:function(e){var t=this,a=e._id?"PUT":"POST",n=e._id?"tasks/".concat(e._id):"tasks";o()({url:n,method:a,data:k()(e,["title","priority","completed","start_date","due_date"]),headers:{"Content-Type":"application/json"}}).then((function(){t.resetForm(),t.getTasks()})).catch((function(e){var a=e.response;t.setState({errors:a.data})}))}},{key:"handleChange",value:function(e){var t=e.target,a=this.state.task;a[t.name]=t.value,this.setState({task:a})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.task;this.saveTask(t)}},{key:"parseQueryParams",value:function(){for(var e="",t=this.state.queryParams,a=0,n=Object.entries(t);a<n.length;a++){var r=n[a],s=Object(c.a)(r,2),l=s[0],i=s[1];i&&(e+=e?"&".concat(l,"=").concat(i):"".concat(l,"=").concat(i))}return e}},{key:"render",value:function(){var e=this.state,t=e.meta,a=e.task,n=e.tasks,s=e.errors;return r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("h1",null,"Create / Update Task"),r.a.createElement(N,{task:a,errors:s,onChange:this.handleChange,onSubmit:this.handleSubmit})),r.a.createElement("div",{className:"column"},r.a.createElement("h1",null,"Tasks"),r.a.createElement(C,{meta:t,tasks:n,onEdit:this.onEdit,onDelete:this.onDelete,onCompletion:this.onCompletion,onSearch:this.onSearch,onChangeLimit:this.onChangeLimit,onPageChange:this.onPageChange}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.defaults.baseURL="https://mayatsa-todolist.herokuapp.com/api",l.a.render(r.a.createElement((function(){return r.a.createElement(_,null)}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.e4513712.chunk.js.map